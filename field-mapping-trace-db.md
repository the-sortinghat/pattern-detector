# Field Mapping Example - Jaeger API and μsVision Database

                 JAEGER API                      |||                               μsVision DATABASE
| Endpoint          | Field                                | Table               |      Field      | Obs.                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-------------------|--------------------------------------|---------------------|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                   |                                      |                     |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| /api/services     | data                                 | services            | name            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                   |                                      |                     |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| /api/dependencies | parent                               | servicedependencies | service_id      | It is necessary to get the ID of the service on "service" table with the name provided by Jaeger's API                                                                                                                                                                                                                                                                                                                                           |
|                   | child                                | servicedependencies | service_dep_id  | It is necessary to get the ID of the service on "service" table with the name provided by Jaeger's API                                                                                                                                                                                                                                                                                                                                           |
|                   |                                      |                     |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| /api/traces       | db.name                              | databases           | name            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                   | db.type                              | databases           | type            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                   | source                               | databaseusages      | service_id      | It is necessary to get the ID of the service on "service" table with the name provided by Jaeger's API                                                                                                                                                                                                                                                                                                                                           |
|                   | db.instance                          | databaseusages      | database_id     | It is necessary to get the ID of the database on "databases" table with the name provided by Jaeger's API                                                                                                                                                                                                                                                                                                                                        |
|                   | db.statement                         | databaseusages      | access_mode     | db.statement will provide the SQL command. "Insert", "Update", "Delete", "Create", "Alter" and "Drop" should be considered as **"RW"** access. "Select" command should be considered **"RO"** access.                                                                                                                                                                                                                                            |
|                   | rpc.method                           | operations          | verb            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                   | operationName                        | operations          | uri             | -                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                   | net.peer.name                        | operations          | exposer_id      | It is necessary to get the ID of the service on "service" table with the name provided by Jaeger's API                                                                                                                                                                                                                                                                                                                                           |
|                   | operationName                        | consumedoperations  | operation_id    | It is necessary to get the ID of the operaion on "operations" table with the name provided by Jaeger's API                                                                                                                                                                                                                                                                                                                                       |
|                   | net.peer.name                        | consumedoperations  | consumer_id     | It is necessary to get the ID of the service on "service" table with the name provided by Jaeger's API                                                                                                                                                                                                                                                                                                                                           |
|                   | messaging.rabbitmq.queue             | messagechannels     | name            | This example considers RabbitMQ as the message broker. Jaeger's API output field will differ in case of using a different message broker tool                                                                                                                                                                                                                                                                                                    |
|                   | processID, span.kind and serviceName | publications        | publisher_id    | Jaeger's API does not directly provide the service name within the message publication span. To address this, it becomes necessary to gather the "processID" and correlate it with the "serviceName" field in the JSON output. Additionally, **publishers** can be identified through the "span.kind" field with the value **"producer"**. Once the "serviceName" is obtained, retrieving the service ID from the "service" table is essential.  |
|                   | messaging.rabbitmq.queue             | publications        | channel_id      | It is necessary to get the ID of the channel on "messagechannels" table with the name provided by Jaeger's API                                                                                                                                                                                                                                                                                                                                   |
|                   | processID, span.kind and serviceName | subscriptions       | subscriber_id   | Jaeger's API does not directly provide the service name within the message publication span. To address this, it becomes necessary to gather the "processID" and correlate it with the "serviceName" field in the JSON output. Additionally, **subscribers** can be identified through the "span.kind" field with the value **"consumer"**. Once the "serviceName" is obtained, retrieving the service ID from the "service" table is essential. |
|                   | messaging.rabbitmq.queue             | subscriptions       | channel_id      | It is necessary to get the ID of the channel on "messagechannels" table with the name provided by Jaeger's API                                                                                                                                                                                                                                                                                                                                   |
